# wildfire data
library(sf)
library(ggplot2)
library(dplyr)
#library(lubridate)
library(maps)
library(mapdata)
library(mapproj)
wildfires <- st_read("data/AgencyHistoricFirePerimeters_2010_2019.shp")
#
# wildfires_2010 <- filter(wildfires, FIRE_YEAR == "2010")
# wildfires_2011 <- filter(wildfires, FIRE_YEAR == "2011")
# wildfires_2012 <- filter(wildfires, FIRE_YEAR == "2012")
# wildfires_2013 <- filter(wildfires, FIRE_YEAR == "2013")
# wildfires_2014 <- filter(wildfires, FIRE_YEAR == "2014")
# wildfires_2015 <- filter(wildfires, FIRE_YEAR == "2015")
# wildfires_2016 <- filter(wildfires, FIRE_YEAR == "2016")
# wildfires_2017 <- filter(wildfires, FIRE_YEAR == "2017")
# wildfires_2018 <- filter(wildfires, FIRE_YEAR == "2018")
# wildfires_2019 <- filter(wildfires, FIRE_YEAR == "2019")
wildfires_2020 <- st_read("data/AgecnyHistoricFirePerimeters_2020.shp")
wildfires <- rbind(wildfires, wildfires_2020); rm(wildfires_2020)
#wildfires$year <- as.numeric(as.character(wildfires$FIRE_YEAR))
### my laptop can't handle gganimate so we'll make separate tiff files and combine them later
fire_list <- split(wildfires, f = wildfires$FIRE_YEAR)
usa <- map_data('state')
year=2010
for (i in fire_list){
ggplot() +
geom_polygon(data = usa, aes(x=long, y = lat, group = group ), color='white', fill= 'grey80') +
geom_sf(data = i$geometry, color='firebrick3', alpha = .4) +
coord_sf(xlim = c(-130,-70), ylim = c(25, 50)) +
theme_minimal() +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank()) +
ggtitle(paste0(year))
filename <- paste0(year, ".tiff")
ggsave(filename, width=6, height=4)
year=year+1
}
acre_data <- wildfires[c('GIS_ACRES','FIRE_YEAR')]
acre_data2 <- dplyr::select(acre_data, -c(geometry))  # remove columns x and y
View(acre_data2)
test <- st_set_geometry(acre_data, NULL) # remove geometry, coerce to data.frame
acre_data <- st_set_geometry(acre_data, NULL) # remove geometry, coerce to data.frame
View(acre_data)
acre_sum <- acre_data %>%
group_by(FIRE_YEAR) %>%
summarise(total_acres = sum(GIS_ACRES))
View(acre_data)
View(acre_sum)
acre_sum <- acre_data %>%
group_by(FIRE_YEAR) %>%
summarise(total_acres = sum(GIS_ACRES, na.omit=T))
View(acre_sum)
acre_sum <- acre_data %>%
group_by(FIRE_YEAR) %>%
summarise(total_acres = sum(GIS_ACRES, na.rm=T))
View(acre_data)
View(acre_sum)
ggplot(data=acre_sum, aes(x=FIRE_YEAR, y=total_acres))+
geom_bar()
ggplot(data=acre_sum, aes(x=FIRE_YEAR, y=total_acres))+
geom_hist()
acre_sum <- na.omit(acre_sum)
View(acre_sum)
ggplot(data=acre_sum, aes(x=FIRE_YEAR, y=total_acres))+
geom_bar()
ggplot(data=acre_sum, aes(x=FIRE_YEAR, y=total_acres))+
geom_bar(stat='identity')
